(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-290d5b56"],{"170c":function(t,e,i){},"1b5c":function(t,e,i){"use strict";i("f521")},"1ec4":function(t,e){t.exports=function(t){var e=t.tocElement||document.querySelector(t.tocSelector);if(e&&e.scrollHeight>e.clientHeight){var i=e.querySelector("."+t.activeListItemClass);i&&(e.scrollTop=i.offsetTop)}}},"276d":function(t,e,i){"use strict";i("5682")},"4ea3":function(t,e,i){"use strict";var s=i("8212"),n=i("8336"),a=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("div",{staticClass:"comment-input-wrapper"},[e("div",{staticStyle:{display:"flex"}},[e(s["a"],{attrs:{size:"40"}},[this.$store.state.avatar?e("img",{attrs:{src:this.$store.state.avatar}}):e("img",{attrs:{src:this.$store.state.blogInfo.websiteConfig.touristAvatar}})]),e("div",{staticClass:"ml-3",staticStyle:{width:"100%"}},[e("div",{staticClass:"comment-input"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{placeholder:"留下点什么吧...","auto-grow":"",dense:""},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}})]),e("div",{staticClass:"emoji-container"},[e("span",{class:t.chooseEmoji?"emoji-btn-active":"emoji-btn",on:{click:function(e){t.chooseEmoji=!t.chooseEmoji}}},[e("i",{staticClass:"iconfont iconbiaoqing"})]),e("button",{staticClass:"upload-btn v-comment-btn",staticStyle:{"margin-left":"auto"},on:{click:t.insertComment}},[t._v(" 提交 ")])]),e("emoji",{attrs:{chooseEmoji:t.chooseEmoji},on:{addEmoji:t.addEmoji}})],1)],1)]),t.count>0&&t.reFresh?e("div",[e("div",{staticClass:"count"},[t._v(t._s(t.count)+" 评论")]),t._l(t.commentList,(function(i,n){return e("div",{key:i.id,staticClass:"pt-5",staticStyle:{display:"flex"}},[e(s["a"],{staticClass:"comment-avatar",attrs:{size:"40"}},[e("img",{attrs:{src:i.avatar}})]),e("div",{staticClass:"comment-meta"},[e("div",{staticClass:"comment-user"},[i.webSite?e("a",{attrs:{href:i.webSite,target:"_blank"}},[t._v(" "+t._s(i.nickname)+" ")]):e("span",[t._v(t._s(i.nickname))]),1==i.userId?e("span",{staticClass:"blogger-tag"},[t._v("博主")]):t._e()]),e("div",{staticClass:"comment-info"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.count-n)+"楼")]),e("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("date")(i.createTime)))]),e("span",{class:t.isLike(i.id)+" iconfont icondianzan",on:{click:function(e){return t.like(i)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i.likeCount>0,expression:"item.likeCount > 0"}]},[t._v(" "+t._s(i.likeCount))]),e("span",{staticClass:"reply-btn",on:{click:function(e){return t.replyComment(n,i)}}},[t._v(" 回复 ")])]),e("p",{staticClass:"comment-content",domProps:{innerHTML:t._s(i.commentContent)}}),t._l(i.replyDTOList,(function(a){return e("div",{key:a.id,staticStyle:{display:"flex"}},[e(s["a"],{staticClass:"comment-avatar",attrs:{size:"36"}},[e("img",{attrs:{src:a.avatar}})]),e("div",{staticClass:"reply-meta"},[e("div",{staticClass:"comment-user"},[a.webSite?e("a",{attrs:{href:a.webSite,target:"_blank"}},[t._v(" "+t._s(a.nickname)+" ")]):e("span",[t._v(t._s(a.nickname))]),1==a.userId?e("span",{staticClass:"blogger-tag"},[t._v("博主")]):t._e()]),e("div",{staticClass:"comment-info"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v(" "+t._s(t._f("date")(a.createTime))+" ")]),e("span",{class:t.isLike(a.id)+" iconfont icondianzan",on:{click:function(e){return t.like(a)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:a.likeCount>0,expression:"reply.likeCount > 0"}]},[t._v(" "+t._s(a.likeCount))]),e("span",{staticClass:"reply-btn",on:{click:function(e){return t.replyComment(n,a)}}},[t._v(" 回复 ")])]),e("p",{staticClass:"comment-content"},[a.replyUserId!=i.userId?[a.replyWebSite?e("a",{staticClass:"comment-nickname ml-1",attrs:{href:a.replyWebSite,target:"_blank"}},[t._v(" @"+t._s(a.replyNickname)+" ")]):e("span",{staticClass:"ml-1"},[t._v(" @"+t._s(a.replyNickname)+" ")]),t._v(" ， ")]:t._e(),e("span",{domProps:{innerHTML:t._s(a.commentContent)}})],2)])],1)})),e("div",{directives:[{name:"show",rawName:"v-show",value:i.replyCount>3,expression:"item.replyCount > 3"}],ref:"check",refInFor:!0,staticClass:"mb-3",staticStyle:{"font-size":"0.75rem",color:"#6d757a"}},[t._v(" 共 "),e("b",[t._v(t._s(i.replyCount))]),t._v(" 条回复， "),e("span",{staticStyle:{color:"#00a1d6",cursor:"pointer"},on:{click:function(e){return t.checkReplies(n,i)}}},[t._v(" 点击查看 ")])]),e("div",{ref:"paging",refInFor:!0,staticClass:"mb-3",staticStyle:{"font-size":"0.75rem",color:"#222",display:"none"}},[e("span",{staticStyle:{"padding-right":"10px"}},[t._v(" 共"+t._s(Math.ceil(i.replyCount/5))+"页 ")]),e("paging",{ref:"page",refInFor:!0,attrs:{totalPage:Math.ceil(i.replyCount/5),index:n,commentId:i.id},on:{changeReplyCurrent:t.changeReplyCurrent}})],1),e("Reply",{ref:"reply",refInFor:!0,attrs:{type:t.type},on:{reloadReply:t.reloadReply}})],2)],1)})),e("div",{staticClass:"load-wrapper"},[t.count>t.commentList.length?e(n["a"],{attrs:{outlined:""},on:{click:t.listComments}},[t._v(" 加载更多... ")]):t._e()],1)],2):e("div",{staticStyle:{padding:"1.25rem","text-align":"center"}},[t._v(" 来发评论吧~ ")])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-title"},[e("i",{staticClass:"iconfont iconpinglunzu"}),t._v("评论")])}],o=i("2f3e"),l=i("bbe0"),c=i("bbe3"),d=i("f568"),m={components:{Reply:o["a"],Emoji:c["a"],Paging:l["a"]},props:{type:{type:Number}},created(){this.listComments()},data:function(){return{reFresh:!0,commentContent:"",chooseEmoji:!1,current:1,commentList:[],count:0}},methods:{replyComment(t,e){this.$refs.reply.forEach(t=>{t.$el.style.display="none"}),this.$refs.reply[t].commentContent="",this.$refs.reply[t].nickname=e.nickname,this.$refs.reply[t].replyUserId=e.userId,this.$refs.reply[t].parentId=this.commentList[t].id,this.$refs.reply[t].chooseEmoji=!1,this.$refs.reply[t].index=t,this.$refs.reply[t].$el.style.display="block"},addEmoji(t){this.commentContent+=t},checkReplies(t,e){this.axios.get("/api/comments/"+e.id+"/replies",{params:{current:1,size:5}}).then(({data:i})=>{this.$refs.check[t].style.display="none",e.replyDTOList=i.data,Math.ceil(e.replyCount/5)>1&&(this.$refs.paging[t].style.display="flex")})},changeReplyCurrent(t,e,i){this.axios.get("/api/comments/"+i+"/replies",{params:{current:t,size:5}}).then(({data:t})=>{this.commentList[e].replyDTOList=t.data})},listComments(){const t=this.$route.path,e=t.split("/");var i={current:this.current,type:this.type};switch(this.type){case 1:case 3:i.topicId=e[2];break;default:break}this.axios.get("/api/comments",{params:i}).then(({data:t})=>{1==this.current?this.commentList=t.data.recordList:this.commentList.push(...t.data.recordList),this.current++,this.count=t.data.count,this.$emit("getCommentCount",this.count)})},insertComment(){if(!this.$store.state.userId)return this.$store.state.loginFlag=!0,!1;if(""==this.commentContent.trim())return this.$toast({type:"error",message:"评论不能为空"}),!1;var t=/\[.+?\]/g;this.commentContent=this.commentContent.replace(t,(function(t){return"<img src= '"+d["a"][t]+"' width='24'height='24' style='margin: 0 1px;vertical-align: text-bottom'/>"}));const e=this.$route.path,i=e.split("/");var s={commentContent:this.commentContent,type:this.type};switch(this.type){case 1:case 3:s.topicId=i[2];break;default:break}this.commentContent="",this.axios.post("/api/comments",s).then(({data:t})=>{if(t.flag){this.current=1,this.listComments();const t=this.$store.state.blogInfo.websiteConfig.isCommentReview;t?this.$toast({type:"warnning",message:"评论成功，正在审核中"}):this.$toast({type:"success",message:"评论成功"})}else this.$toast({type:"error",message:t.message})})},like(t){if(!this.$store.state.userId)return this.$store.state.loginFlag=!0,!1;this.axios.post("/api/comments/"+t.id+"/like").then(({data:e})=>{e.flag&&(-1!=this.$store.state.commentLikeSet.indexOf(t.id)?this.$set(t,"likeCount",t.likeCount-1):this.$set(t,"likeCount",t.likeCount+1),this.$store.commit("commentLike",t.id))})},reloadReply(t){this.axios.get("/api/comments/"+this.commentList[t].id+"/replies",{params:{current:this.$refs.page[t].current,size:5}}).then(({data:e})=>{this.commentList[t].replyCount++,this.commentList[t].replyCount>5&&(this.$refs.paging[t].style.display="flex"),this.$refs.check[t].style.display="none",this.$refs.reply[t].$el.style.display="none",this.commentList[t].replyDTOList=e.data})}},computed:{isLike(){return function(t){var e=this.$store.state.commentLikeSet;return-1!=e.indexOf(t)?"like-active":"like"}}},watch:{commentList(){this.reFresh=!1,this.$nextTick(()=>{this.reFresh=!0})}}},u=m,h=(i("276d"),i("2877")),p=Object(h["a"])(u,a,r,!1,null,"65e82974",null);e["a"]=p.exports},5682:function(t,e,i){},"5bb8":function(t,e){t.exports={tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",hasInnerContainers:!1,linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",activeListItemClass:"is-active-li",collapseDepth:0,scrollSmooth:!0,scrollSmoothDuration:420,scrollSmoothOffset:0,scrollEndCallback:function(t){},headingsOffset:1,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:!1,includeTitleTags:!1,onClick:function(t){},orderedList:!0,scrollContainer:null,skipRendering:!1,headingLabelCallback:!1,ignoreHiddenElements:!1,headingObjectCallback:null,basePath:"",disableTocScrollSync:!1}},7577:function(t,e,i){(function(s){var n,a,r;(function(i,s){a=[],n=s(i),r="function"===typeof n?n.apply(e,a):n,void 0===r||(t.exports=r)})("undefined"!==typeof s?s:this.window||this.global,(function(t){"use strict";var e,s,n=i("5bb8"),a={},r={},o=i("83fa"),l=i("a65a"),c=i("1ec4"),d=!!t&&!!t.document&&!!t.document.querySelector&&!!t.addEventListener;if("undefined"!==typeof window||d){var m,u=Object.prototype.hasOwnProperty;return r.destroy=function(){var t=C(a);null!==t&&(a.skipRendering||t&&(t.innerHTML=""),a.scrollContainer&&document.querySelector(a.scrollContainer)?(document.querySelector(a.scrollContainer).removeEventListener("scroll",this._scrollListener,!1),document.querySelector(a.scrollContainer).removeEventListener("resize",this._scrollListener,!1),e&&document.querySelector(a.scrollContainer).removeEventListener("click",this._clickListener,!1)):(document.removeEventListener("scroll",this._scrollListener,!1),document.removeEventListener("resize",this._scrollListener,!1),e&&document.removeEventListener("click",this._clickListener,!1)))},r.init=function(t){if(d){a=h(n,t||{}),this.options=a,this.state={},a.scrollSmooth&&(a.duration=a.scrollSmoothDuration,a.offset=a.scrollSmoothOffset,r.scrollSmooth=i("bbe6").initSmoothScrolling(a)),e=o(a),s=l(a),this._buildHtml=e,this._parseContent=s,this._headingsArray=m,r.destroy();var u=f(a);if(null!==u){var v=C(a);if(null!==v&&(m=s.selectHeadings(u,a.headingSelector),null!==m)){var g=s.nestHeadingsArray(m),y=g.nest;a.skipRendering||e.render(v,y),this._scrollListener=p((function(t){e.updateToc(m),!a.disableTocScrollSync&&c(a);var i=t&&t.target&&t.target.scrollingElement&&0===t.target.scrollingElement.scrollTop;(t&&(0===t.eventPhase||null===t.currentTarget)||i)&&(e.updateToc(m),a.scrollEndCallback&&a.scrollEndCallback(t))}),a.throttleTimeout),this._scrollListener(),a.scrollContainer&&document.querySelector(a.scrollContainer)?(document.querySelector(a.scrollContainer).addEventListener("scroll",this._scrollListener,!1),document.querySelector(a.scrollContainer).addEventListener("resize",this._scrollListener,!1)):(document.addEventListener("scroll",this._scrollListener,!1),document.addEventListener("resize",this._scrollListener,!1));var _=null;return this._clickListener=p((function(t){a.scrollSmooth&&e.disableTocAnimation(t),e.updateToc(m),_&&clearTimeout(_),_=setTimeout((function(){e.enableTocAnimation()}),a.scrollSmoothDuration)}),a.throttleTimeout),a.scrollContainer&&document.querySelector(a.scrollContainer)?document.querySelector(a.scrollContainer).addEventListener("click",this._clickListener,!1):document.addEventListener("click",this._clickListener,!1),this}}}},r.refresh=function(t){r.destroy(),r.init(t||this.options)},t.tocbot=r,r}function h(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var s in i)u.call(i,s)&&(t[s]=i[s])}return t}function p(t,e,i){var s,n;return e||(e=250),function(){var a=i||this,r=+new Date,o=arguments;s&&r<s+e?(clearTimeout(n),n=setTimeout((function(){s=r,t.apply(a,o)}),e)):(s=r,t.apply(a,o))}}function f(t){try{return t.contentElement||document.querySelector(t.contentSelector)}catch(e){return console.warn("Contents element not found: "+t.contentSelector),null}}function C(t){try{return t.tocElement||document.querySelector(t.tocSelector)}catch(e){return console.warn("TOC element not found: "+t.tocSelector),null}}}))}).call(this,i("c8ba"))},"83fa":function(t,e){t.exports=function(t){var e,i=[].forEach,s=[].some,n=document.body,a=!0,r=" ";function o(t,e){var i=e.appendChild(c(t));if(t.children.length){var s=d(t.isCollapsed);t.children.forEach((function(t){o(t,s)})),i.appendChild(s)}}function l(t,i){var s=!1,n=d(s);if(i.forEach((function(t){o(t,n)})),e=t||e,null!==e)return e.firstChild&&e.removeChild(e.firstChild),0===i.length?e:e.appendChild(n)}function c(e){var s=document.createElement("li"),n=document.createElement("a");return t.listItemClass&&s.setAttribute("class",t.listItemClass),t.onClick&&(n.onclick=t.onClick),t.includeTitleTags&&n.setAttribute("title",e.textContent),t.includeHtml&&e.childNodes.length?i.call(e.childNodes,(function(t){n.appendChild(t.cloneNode(!0))})):n.textContent=e.textContent,n.setAttribute("href",t.basePath+"#"+e.id),n.setAttribute("class",t.linkClass+r+"node-name--"+e.nodeName+r+t.extraLinkClasses),s.appendChild(n),s}function d(e){var i=t.orderedList?"ol":"ul",s=document.createElement(i),n=t.listClass+r+t.extraListClasses;return e&&(n+=r+t.collapsibleClass,n+=r+t.isCollapsedClass),s.setAttribute("class",n),s}function m(){var i;t.scrollContainer&&document.querySelector(t.scrollContainer)?i=document.querySelector(t.scrollContainer).scrollTop:i=document.documentElement.scrollTop||n.scrollTop;var s=document.querySelector(t.positionFixedSelector);"auto"===t.fixedSidebarOffset&&(t.fixedSidebarOffset=e.offsetTop),i>t.fixedSidebarOffset?-1===s.className.indexOf(t.positionFixedClass)&&(s.className+=r+t.positionFixedClass):s.className=s.className.split(r+t.positionFixedClass).join("")}function u(e){var i=0;return null!==e&&(i=e.offsetTop,t.hasInnerContainers&&(i+=u(e.offsetParent))),i}function h(o){var l;t.scrollContainer&&document.querySelector(t.scrollContainer)?l=document.querySelector(t.scrollContainer).scrollTop:l=document.documentElement.scrollTop||n.scrollTop;t.positionFixedSelector&&m();var c,d=o;if(a&&null!==e&&d.length>0){s.call(d,(function(e,i){if(u(e)>l+t.headingsOffset+10){var s=0===i?i:i-1;return c=d[s],!0}if(i===d.length-1)return c=d[d.length-1],!0}));var h=e.querySelectorAll("."+t.linkClass);i.call(h,(function(e){e.className=e.className.split(r+t.activeLinkClass).join("")}));var f=e.querySelectorAll("."+t.listItemClass);i.call(f,(function(e){e.className=e.className.split(r+t.activeListItemClass).join("")}));var C=e.querySelector("."+t.linkClass+".node-name--"+c.nodeName+'[href="'+t.basePath+"#"+c.id.replace(/([ #;&,.+*~':"!^$[\]()=>|/@])/g,"\\$1")+'"]');C&&-1===C.className.indexOf(t.activeLinkClass)&&(C.className+=r+t.activeLinkClass);var v=C&&C.parentNode;v&&-1===v.className.indexOf(t.activeListItemClass)&&(v.className+=r+t.activeListItemClass);var g=e.querySelectorAll("."+t.listClass+"."+t.collapsibleClass);i.call(g,(function(e){-1===e.className.indexOf(t.isCollapsedClass)&&(e.className+=r+t.isCollapsedClass)})),C&&C.nextSibling&&-1!==C.nextSibling.className.indexOf(t.isCollapsedClass)&&(C.nextSibling.className=C.nextSibling.className.split(r+t.isCollapsedClass).join("")),p(C&&C.parentNode.parentNode)}}function p(e){return e&&-1!==e.className.indexOf(t.collapsibleClass)&&-1!==e.className.indexOf(t.isCollapsedClass)?(e.className=e.className.split(r+t.isCollapsedClass).join(""),p(e.parentNode.parentNode)):e}function f(e){var i=e.target||e.srcElement;"string"===typeof i.className&&-1!==i.className.indexOf(t.linkClass)&&(a=!1)}function C(){a=!0}return{enableTocAnimation:C,disableTocAnimation:f,render:l,updateToc:h}}},a65a:function(t,e){t.exports=function(t){var e=[].reduce;function i(t){return t[t.length-1]}function s(t){return+t.nodeName.toUpperCase().replace("H","")}function n(e){if(!(e instanceof window.HTMLElement))return e;if(t.ignoreHiddenElements&&(!e.offsetHeight||!e.offsetParent))return null;const i=e.getAttribute("data-heading-label")||(t.headingLabelCallback?String(t.headingLabelCallback(e.textContent)):e.textContent.trim());var n={id:e.id,children:[],nodeName:e.nodeName,headingLevel:s(e),textContent:i};return t.includeHtml&&(n.childNodes=e.childNodes),t.headingObjectCallback?t.headingObjectCallback(n,e):n}function a(e,s){var a=n(e),r=a.headingLevel,o=s,l=i(o),c=l?l.headingLevel:0,d=r-c;while(d>0){if(l=i(o),l&&r===l.headingLevel)break;l&&void 0!==l.children&&(o=l.children),d--}return r>=t.collapseDepth&&(a.isCollapsed=!0),o.push(a),o}function r(e,i){var s=i;t.ignoreSelector&&(s=i.split(",").map((function(e){return e.trim()+":not("+t.ignoreSelector+")"})));try{return e.querySelectorAll(s)}catch(n){return console.warn("Headers not found with selector: "+s),null}}function o(t){return e.call(t,(function(t,e){var i=n(e);return i&&a(i,t.nest),t}),{nest:[]})}return{nestHeadingsArray:o,selectHeadings:r}}},bbe6:function(t,e){function i(t){var e=t.duration,i=t.offset,n=location.hash?o(location.href):location.href;function a(){function n(n){!r(n.target)||n.target.className.indexOf("no-smooth-scroll")>-1||"#"===n.target.href.charAt(n.target.href.length-2)&&"!"===n.target.href.charAt(n.target.href.length-1)||-1===n.target.className.indexOf(t.linkClass)||s(n.target.hash,{duration:e,offset:i,callback:function(){l(n.target.hash)}})}document.body.addEventListener("click",n,!1)}function r(t){return"a"===t.tagName.toLowerCase()&&(t.hash.length>0||"#"===t.href.charAt(t.href.length-1))&&(o(t.href)===n||o(t.href)+"#"===n)}function o(t){return t.slice(0,t.lastIndexOf("#"))}function l(t){var e=document.getElementById(t.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())}a()}function s(t,e){var i,s,n=window.pageYOffset,a={duration:e.duration,offset:e.offset||0,callback:e.callback,easing:e.easing||m},r=document.querySelector('[id="'+decodeURI(t).split("#").join("")+'"]')||document.querySelector('[id="'+t.split("#").join("")+'"]'),o="string"===typeof t?a.offset+(t?r&&r.getBoundingClientRect().top||0:-(document.documentElement.scrollTop||document.body.scrollTop)):t,l="function"===typeof a.duration?a.duration(o):a.duration;function c(t){s=t-i,window.scrollTo(0,a.easing(s,n,o,l)),s<l?requestAnimationFrame(c):d()}function d(){window.scrollTo(0,n+o),"function"===typeof a.callback&&a.callback()}function m(t,e,i,s){return t/=s/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)}requestAnimationFrame((function(t){i=t,c(t)}))}e.initSmoothScrolling=i},ced6:function(t,e,i){"use strict";i("170c")},f521:function(t,e,i){},fa20:function(t,e,i){"use strict";i.r(e);var s=i("b0af"),n=i("62ad"),a=i("132d"),r=i("0fd9"),o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"banner",style:t.articleCover},[e("div",{staticClass:"article-info-container"},[e("div",{staticClass:"article-title"},[t._v(t._s(t.article.articleTitle))]),e("div",{staticClass:"article-info"},[e("div",{staticClass:"first-line"},[e("span",[e("i",{staticClass:"iconfont iconrili"}),t._v(" 发表于 "+t._s(t._f("date")(t.article.createTime))+" ")]),e("span",{staticClass:"separator"},[t._v("|")]),e("span",[e("i",{staticClass:"iconfont icongengxinshijian"}),t._v(" 更新于 "),t.article.updateTime?[t._v(" "+t._s(t._f("date")(t.article.updateTime))+" ")]:[t._v(" "+t._s(t._f("date")(t.article.createTime))+" ")]],2),e("span",{staticClass:"separator"},[t._v("|")]),e("span",{staticClass:"article-category"},[e("i",{staticClass:"iconfont iconfenlei1"}),e("router-link",{attrs:{to:"/categories/"+t.article.categoryId}},[t._v(" "+t._s(t.article.categoryName)+" ")])],1)]),e("div",{staticClass:"second-line"},[e("span",[e("i",{staticClass:"iconfont iconzishu"}),t._v(" 字数统计: "+t._s(t._f("num")(t.wordNum))+" ")]),e("span",{staticClass:"separator"},[t._v("|")]),e("span",[e("i",{staticClass:"iconfont iconshijian"}),t._v(" 阅读时长: "+t._s(t.readTime)+" ")])]),e("div",{staticClass:"third-line"},[e("span",{staticClass:"separator"},[t._v("|")]),e("span",[e("i",{staticClass:"iconfont iconliulan"}),t._v(" 阅读量: "+t._s(t.article.viewsCount)+" ")]),e("span",{staticClass:"separator"},[t._v("|")]),e("span",[e("i",{staticClass:"iconfont iconpinglunzu1"}),t._v("评论数: "+t._s(t.commentCount)+" ")])])])])]),e(r["a"],{staticClass:"article-container"},[e(n["a"],{attrs:{md:"9",cols:"12"}},[e(s["a"],{staticClass:"article-wrapper"},[e("article",{ref:"article",staticClass:"article-content markdown-body",attrs:{id:"write"},domProps:{innerHTML:t._s(t.article.articleContent)}}),e("div",{staticClass:"aritcle-copyright"},[e("div",[e("span",[t._v("文章作者：")]),e("router-link",{attrs:{to:"/"}},[t._v(" "+t._s(t.blogInfo.websiteConfig.websiteAuthor)+" ")])],1),e("div",[e("span",[t._v("文章链接：")]),e("a",{attrs:{href:t.articleHref,target:"_blank"}},[t._v(t._s(t.articleHref)+" ")])]),e("div",[e("span",[t._v("版权声明：")]),t._v("本博客所有文章除特别声明外，均采用 "),e("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank"}},[t._v(" CC BY-NC-SA 4.0 ")]),t._v(" 许可协议。转载请注明文章出处。 ")])]),e("div",{staticClass:"article-operation"},[e("div",{staticClass:"tag-container"},t._l(t.article.tagDTOList,(function(i){return e("router-link",{key:i.id,attrs:{to:"/tags/"+i.id}},[t._v(" "+t._s(i.tagName)+" ")])})),1),e("share",{staticStyle:{"margin-left":"auto"},attrs:{config:t.config}})],1),e("div",{staticClass:"article-reward"},[e("a",{class:t.isLike,on:{click:t.like}},[e(a["a"],{attrs:{size:"14",color:"#fff"}},[t._v("mdi-thumb-up")]),t._v(" 点赞 "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.article.likeCount>0,expression:"article.likeCount > 0"}]},[t._v(t._s(t.article.likeCount))])],1),1==t.blogInfo.websiteConfig.isReward?e("a",{staticClass:"reward-btn"},[e("i",{staticClass:"iconfont iconerweima"}),t._v(" 打赏 "),e("div",{staticClass:"animated fadeInDown reward-main"},[e("ul",{staticClass:"reward-all"},[e("li",{staticClass:"reward-item"},[e("img",{staticClass:"reward-img",attrs:{src:t.blogInfo.websiteConfig.weiXinQRCode}}),e("div",{staticClass:"reward-desc"},[t._v("微信")])]),e("li",{staticClass:"reward-item"},[e("img",{staticClass:"reward-img",attrs:{src:t.blogInfo.websiteConfig.alipayQRCode}}),e("div",{staticClass:"reward-desc"},[t._v("支付宝")])])])])]):t._e()]),e("div",{staticClass:"pagination-post"},[t.article.lastArticle.id?e("div",{class:t.isFull(t.article.lastArticle.id)},[e("router-link",{attrs:{to:"/articles/"+t.article.lastArticle.id}},[e("img",{staticClass:"post-cover",attrs:{src:t.article.lastArticle.articleCover}}),e("div",{staticClass:"post-info"},[e("div",{staticClass:"label"},[t._v("上一篇")]),e("div",{staticClass:"post-title"},[t._v(" "+t._s(t.article.lastArticle.articleTitle)+" ")])])])],1):t._e(),t.article.nextArticle.id?e("div",{class:t.isFull(t.article.nextArticle.id)},[e("router-link",{attrs:{to:"/articles/"+t.article.nextArticle.id}},[e("img",{staticClass:"post-cover",attrs:{src:t.article.nextArticle.articleCover}}),e("div",{staticClass:"post-info",staticStyle:{"text-align":"right"}},[e("div",{staticClass:"label"},[t._v("下一篇")]),e("div",{staticClass:"post-title"},[t._v(" "+t._s(t.article.nextArticle.articleTitle)+" ")])])])],1):t._e()]),t.article.recommendArticleList.length?e("div",{staticClass:"recommend-container"},[e("div",{staticClass:"recommend-title"},[e(a["a"],{attrs:{size:"20",color:"#4c4948"}},[t._v("mdi-thumb-up")]),t._v(" 相关推荐 ")],1),e("div",{staticClass:"recommend-list"},t._l(t.article.recommendArticleList,(function(i){return e("div",{key:i.id,staticClass:"recommend-item"},[e("router-link",{attrs:{to:"/articles/"+i.id}},[e("img",{staticClass:"recommend-cover",attrs:{src:i.articleCover}}),e("div",{staticClass:"recommend-info"},[e("div",{staticClass:"recommend-date"},[e("i",{staticClass:"iconfont iconrili"}),t._v(" "+t._s(t._f("date")(i.createTime))+" ")]),e("div",[t._v(t._s(i.articleTitle))])])])],1)})),0)]):t._e(),e("hr"),e("comment",{attrs:{type:t.commentType},on:{getCommentCount:t.getCommentCount}})],1)],1),e(n["a"],{staticClass:"d-md-block d-none",attrs:{md:"3",cols:"12"}},[e("div",{staticStyle:{position:"sticky",top:"20px"}},[e(s["a"],{staticClass:"right-container"},[e("div",{staticClass:"right-title"},[e("i",{staticClass:"iconfont iconhanbao",staticStyle:{"font-size":"16.8px"}}),e("span",{staticStyle:{"margin-left":"10px"}},[t._v("目录")])]),e("div",{attrs:{id:"toc"}})]),e(s["a"],{staticClass:"right-container",staticStyle:{"margin-top":"20px"}},[e("div",{staticClass:"right-title"},[e("i",{staticClass:"iconfont icongengxinshijian",staticStyle:{"font-size":"16.8px"}}),e("span",{staticStyle:{"margin-left":"10px"}},[t._v("最新文章")])]),e("div",{staticClass:"article-list"},t._l(t.article.newestArticleList,(function(i){return e("div",{key:i.id,staticClass:"article-item"},[e("router-link",{staticClass:"content-cover",attrs:{to:"/articles/"+i.id}},[e("img",{attrs:{src:i.articleCover}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"content-title"},[e("router-link",{attrs:{to:"/articles/"+i.id}},[t._v(" "+t._s(i.articleTitle)+" ")])],1),e("div",{staticClass:"content-time"},[t._v(t._s(t._f("date")(i.createTime)))])])],1)})),0)])],1)])],1)],1)},l=[],c=i("b311"),d=i.n(c),m=i("8e36"),u=i("4ea3"),h=i("7577"),p=i.n(h),f={components:{Comment:u["a"]},created(){this.getArticle()},destroyed(){this.clipboard.destroy(),p.a.destroy()},data:function(){return{config:{sites:["qzone","wechat","weibo","qq"]},imgList:[],article:{nextArticle:{id:0,articleCover:""},lastArticle:{id:0,articleCover:""},recommendArticleList:[],newestArticleList:[]},wordNum:"",readTime:"",commentType:1,articleHref:window.location.href,clipboard:null,commentCount:0}},methods:{getArticle(){const t=this;this.axios.get("/api"+this.$route.path).then(({data:e})=>{document.title=e.data.articleTitle,this.article=e.data,this.article.articleContent=Object(m["a"])(this.article.articleContent),this.$nextTick(()=>{this.wordNum=this.deleteHTMLTag(this.article.articleContent).length,this.readTime=Math.round(this.wordNum/400)+"分钟",this.clipboard=new d.a(".copy-btn"),this.clipboard.on("success",()=>{this.$toast({type:"success",message:"复制成功"})});let e=this.$refs.article.children;if(e.length)for(let t=0;t<e.length;t++){let i=e[t],s=/^H[1-4]{1}$/;s.exec(i.tagName)&&(i.id=t)}p.a.init({tocSelector:"#toc",contentSelector:".article-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,onClick:function(t){t.preventDefault()}});const i=this.$refs.article.getElementsByTagName("img");for(var s=0;s<i.length;s++)this.imgList.push(i[s].src),i[s].addEventListener("click",(function(e){t.previewImg(e.target.currentSrc)}))})})},like(){if(!this.$store.state.userId)return this.$store.state.loginFlag=!0,!1;this.axios.post("/api/articles/"+this.article.id+"/like").then(({data:t})=>{t.flag&&(-1!=this.$store.state.articleLikeSet.indexOf(this.article.id)?this.$set(this.article,"likeCount",this.article.likeCount-1):this.$set(this.article,"likeCount",this.article.likeCount+1),this.$store.commit("articleLike",this.article.id))})},previewImg(t){this.$imagePreview({images:this.imgList,index:this.imgList.indexOf(t)})},deleteHTMLTag(t){return t.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"")},getCommentCount(t){this.commentCount=t}},computed:{blogInfo(){return this.$store.state.blogInfo},articleCover(){return"background: url("+this.article.articleCover+") center center / cover no-repeat"},isLike(){var t=this.$store.state.articleLikeSet;return-1!=t.indexOf(this.article.id)?"like-btn-active":"like-btn"},isFull(){return function(t){return t?"post full":"post"}}}},C=f,v=(i("1b5c"),i("ced6"),i("2877")),g=Object(v["a"])(C,o,l,!1,null,"5e458194",null);e["default"]=g.exports}}]);